syntax = "proto3";
package com.wavesplatform.api.grpc;
import "address.proto";
import "block.proto";
import "google/protobuf/empty.proto";
import "google/protobuf/wrappers.proto";

service BlocksApi {
    rpc BlocksByAddress (BlocksByAddressRequest) returns (stream BlockAndHeight);
    rpc ChildBlock (BlockIdRequest) returns (Block);
    rpc BlocksDelay (BlocksDelayRequest) returns (google.protobuf.UInt64Value);
    rpc BlockHeight (BlockIdRequest) returns (google.protobuf.UInt32Value);
    rpc CurrentHeight (google.protobuf.Empty) returns (google.protobuf.UInt32Value);
    rpc BlockAtHeight (google.protobuf.UInt32Value) returns (Block);
    rpc BlockHeaderAtHeight (google.protobuf.UInt32Value) returns (Block.SignedHeader);
    rpc BlocksRange (BlocksRangeRequest) returns (stream Block);
    rpc BlockHeadersRange (BlocksRangeRequest) returns (stream Block.SignedHeader);
    rpc LastBlock (google.protobuf.Empty) returns (Block);
    rpc LastBlockHeader (google.protobuf.Empty) returns (Block.SignedHeader);
    rpc FirstBlock (google.protobuf.Empty) returns (Block);
    rpc BlockBySignature (BlockIdRequest) returns (Block);
}

message BlockIdRequest {
    bytes block_id = 1;
}

message BlocksRangeRequest {
    uint32 from_height = 2;
    uint32 to_height = 3;
}

message BlocksByAddressRequest {
    Recipient address = 1;
    uint32 from_height = 2;
    uint32 to_height = 3;
}

message BlocksDelayRequest {
    bytes block_id = 1;
    uint32 block_num = 2;
}

message BlockAndHeight {
    Block block = 1;
    uint32 height = 2;
}
